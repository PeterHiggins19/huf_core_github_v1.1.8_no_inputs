<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Weaviate √ó HUF ‚Äî The Full Picture</title>
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@300;400;500;700&family=Instrument+Serif:ital@0;1&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #09090f;
    --s1: #0f1018;
    --s2: #14151f;
    --border: #1f2133;
    --text: #e2e4f0;
    --muted: #6b6e8a;
    --wv: #4fc98a;
    --wv-dim: rgba(79,201,138,0.1);
    --wv-border: rgba(79,201,138,0.2);
    --huf: #f5a623;
    --huf-dim: rgba(245,166,35,0.1);
    --huf-border: rgba(245,166,35,0.2);
    --gap: #e05c5c;
    --gap-dim: rgba(224,92,92,0.1);
    --blue: #5b8dee;
    --blue-dim: rgba(91,141,238,0.1);
  }

  * { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'DM Sans', sans-serif;
    padding: 48px 24px 80px;
    line-height: 1.6;
  }

  .container { max-width: 960px; margin: 0 auto; }

  /* ‚îÄ‚îÄ HEADER ‚îÄ‚îÄ */
  .masthead {
    text-align: center;
    margin-bottom: 64px;
    animation: rise 0.6s ease both;
  }

  .eyebrow {
    display: inline-block;
    font-size: 10px;
    letter-spacing: 0.28em;
    text-transform: uppercase;
    color: var(--muted);
    margin-bottom: 16px;
    border: 1px solid var(--border);
    padding: 5px 16px;
  }

  h1 {
    font-family: 'Instrument Serif', serif;
    font-size: clamp(34px, 5.5vw, 58px);
    font-weight: 400;
    line-height: 1.1;
    margin-bottom: 16px;
  }

  h1 .wv { color: var(--wv); }
  h1 .huf { color: var(--huf); font-style: italic; }

  .lede {
    font-size: 15px;
    color: var(--muted);
    max-width: 560px;
    margin: 0 auto;
    line-height: 1.7;
  }

  /* ‚îÄ‚îÄ SECTION ‚îÄ‚îÄ */
  .section {
    margin-bottom: 64px;
    animation: rise 0.5s ease both;
  }

  .section-tag {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 24px;
  }

  .tag-chip {
    font-size: 10px;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    padding: 4px 12px;
    border-radius: 2px;
    font-weight: 500;
  }

  .chip-wv  { background: var(--wv-dim);  color: var(--wv);  border: 1px solid var(--wv-border); }
  .chip-huf { background: var(--huf-dim); color: var(--huf); border: 1px solid var(--huf-border); }
  .chip-gap { background: var(--gap-dim); color: var(--gap); border: 1px solid rgba(224,92,92,0.2); }
  .chip-exp { background: var(--blue-dim);color: var(--blue);border: 1px solid rgba(91,141,238,0.2); }

  .tag-line { flex: 1; height: 1px; background: var(--border); }

  h2 {
    font-family: 'Instrument Serif', serif;
    font-size: clamp(22px, 3vw, 30px);
    font-weight: 400;
    margin-bottom: 6px;
    line-height: 1.2;
  }

  .section-sub {
    font-size: 13px;
    color: var(--muted);
    margin-bottom: 28px;
  }

  /* ‚îÄ‚îÄ WHAT WEAVIATE IS ‚îÄ‚îÄ */
  .wv-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1px;
    background: var(--border);
    border: 1px solid var(--border);
    margin-bottom: 24px;
  }

  .wv-card {
    background: var(--s1);
    padding: 22px 20px;
  }

  .wv-card-icon { font-size: 22px; margin-bottom: 10px; }

  .wv-card h3 {
    font-size: 14px;
    font-weight: 600;
    margin-bottom: 6px;
    color: var(--wv);
  }

  .wv-card p { font-size: 12px; color: var(--muted); line-height: 1.6; }

  /* ‚îÄ‚îÄ RAG FLOW ‚îÄ‚îÄ */
  .rag-flow {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 0;
    background: var(--border);
    border: 1px solid var(--border);
    margin-bottom: 24px;
  }

  .rf-step {
    background: var(--s1);
    padding: 16px 14px;
    position: relative;
    text-align: center;
  }

  .rf-step::after {
    content: '‚Üí';
    position: absolute;
    right: -9px;
    top: 50%;
    transform: translateY(-50%);
    color: var(--muted);
    font-size: 12px;
    z-index: 2;
  }
  .rf-step:last-child::after { display: none; }

  .rf-icon { font-size: 20px; margin-bottom: 6px; }
  .rf-title { font-size: 11px; font-weight: 600; margin-bottom: 4px; color: var(--text); }
  .rf-desc  { font-size: 10px; color: var(--muted); line-height: 1.5; }

  /* ‚îÄ‚îÄ MULTI-TENANT DIAGRAM ‚îÄ‚îÄ */
  .mt-diagram {
    background: var(--s1);
    border: 1px solid var(--border);
    padding: 24px;
    margin-bottom: 24px;
  }

  .mt-title { font-size: 11px; letter-spacing: 0.15em; text-transform: uppercase; color: var(--muted); margin-bottom: 16px; }

  .mt-app {
    background: var(--blue-dim);
    border: 1px solid rgba(91,141,238,0.2);
    padding: 10px 16px;
    font-size: 12px;
    color: var(--blue);
    text-align: center;
    margin-bottom: 12px;
    font-weight: 600;
  }

  .mt-arrow { text-align: center; color: var(--muted); font-size: 12px; margin-bottom: 12px; }

  .mt-wv {
    background: var(--s2);
    border: 1px solid var(--border);
    padding: 16px;
  }

  .mt-wv-label { font-size: 10px; letter-spacing: 0.15em; text-transform: uppercase; color: var(--wv); margin-bottom: 12px; text-align: center; }

  .mt-tenants { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; }

  .mt-tenant {
    padding: 10px 8px;
    text-align: center;
    font-size: 10px;
    font-weight: 600;
  }

  .mt-tenant.kb       { background: rgba(79,201,138,0.12); color: var(--wv); border: 1px solid var(--wv-border); }
  .mt-tenant.tickets  { background: rgba(91,141,238,0.12); color: var(--blue); border: 1px solid rgba(91,141,238,0.2); }
  .mt-tenant.docs     { background: rgba(245,166,35,0.12); color: var(--huf); border: 1px solid var(--huf-border); }
  .mt-tenant.emails   { background: rgba(224,92,92,0.12); color: var(--gap); border: 1px solid rgba(224,92,92,0.2); }

  .mt-tenant-sub { font-size: 9px; font-weight: 400; color: var(--muted); margin-top: 3px; }

  /* query result bar */
  .query-result {
    margin-top: 16px;
    background: var(--bg);
    border: 1px solid var(--border);
    padding: 14px 16px;
  }

  .qr-label { font-size: 10px; letter-spacing: 0.12em; text-transform: uppercase; color: var(--muted); margin-bottom: 10px; }

  .qr-bar-row { display: flex; align-items: center; gap: 10px; margin-bottom: 6px; }

  .qr-name { font-size: 11px; min-width: 70px; color: var(--text); }

  .qr-bar-bg { flex: 1; height: 16px; background: var(--border); position: relative; overflow: hidden; }

  .qr-fill { height: 100%; transition: width 1.4s cubic-bezier(.4,0,.2,1); display: flex; align-items: center; padding-left: 6px; font-size: 9px; font-weight: 600; color: var(--bg); }

  .fill-wv { background: var(--wv); }
  .fill-bl { background: var(--blue); }
  .fill-hu { background: var(--huf); }
  .fill-re { background: var(--gap); }

  .qr-pct { font-size: 11px; color: var(--muted); min-width: 36px; text-align: right; }

  .qr-note {
    margin-top: 10px;
    font-size: 11px;
    color: var(--gap);
    line-height: 1.5;
  }

  /* ‚îÄ‚îÄ THE GAP ‚îÄ‚îÄ */
  .gap-box {
    background: var(--gap-dim);
    border: 1px solid rgba(224,92,92,0.25);
    padding: 24px 28px;
    margin-bottom: 28px;
  }

  .gap-box h3 {
    font-family: 'Instrument Serif', serif;
    font-size: 20px;
    color: var(--gap);
    margin-bottom: 12px;
  }

  .gap-box p { font-size: 13px; color: var(--text); line-height: 1.75; margin-bottom: 10px; }
  .gap-box p:last-child { margin-bottom: 0; color: var(--muted); }

  .gap-3col {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 12px;
    margin-bottom: 24px;
  }

  .gap-item {
    background: var(--s1);
    border: 1px solid var(--border);
    padding: 18px;
  }

  .gap-q { font-size: 12px; color: var(--gap); margin-bottom: 8px; line-height: 1.4; font-weight: 500; }

  .gap-a { font-size: 11px; color: var(--muted); line-height: 1.6; }
  .gap-a strong { color: var(--text); }

  /* ‚îÄ‚îÄ HOW HUF FILLS IT ‚îÄ‚îÄ */
  .huf-flow {
    display: grid;
    grid-template-columns: 1fr auto 1fr auto 1fr;
    gap: 8px;
    align-items: center;
    margin-bottom: 24px;
  }

  .hf-box {
    background: var(--s1);
    border: 1px solid var(--border);
    padding: 18px;
    text-align: center;
  }

  .hf-box.highlight {
    background: var(--huf-dim);
    border-color: var(--huf-border);
  }

  .hf-icon { font-size: 22px; margin-bottom: 8px; }
  .hf-title { font-size: 12px; font-weight: 600; margin-bottom: 5px; }
  .hf-title.huf-c { color: var(--huf); }
  .hf-desc { font-size: 10px; color: var(--muted); line-height: 1.55; }
  .hf-arrow { text-align: center; color: var(--muted); font-size: 18px; }

  /* ‚îÄ‚îÄ EXPORT FORMAT ‚îÄ‚îÄ */
  .export-split {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
    margin-bottom: 16px;
  }

  .exp-pane {
    background: var(--s1);
    border: 1px solid var(--border);
    overflow: hidden;
  }

  .exp-header {
    background: var(--s2);
    padding: 10px 16px;
    border-bottom: 1px solid var(--border);
    font-size: 11px;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .exp-header-title { font-weight: 600; color: var(--text); }
  .exp-header-note  { font-size: 9px; color: var(--muted); }

  .exp-body { padding: 16px; }

  pre {
    font-family: 'DM Mono', 'Courier New', monospace;
    font-size: 11px;
    line-height: 1.7;
    color: var(--text);
    white-space: pre;
    overflow-x: auto;
  }

  .c-key   { color: #5b8dee; }
  .c-str   { color: #4fc98a; }
  .c-num   { color: #f5a623; }
  .c-dim   { color: #6b6e8a; }

  .transform-note {
    background: var(--huf-dim);
    border: 1px solid var(--huf-border);
    padding: 12px 16px;
    font-size: 11px;
    color: var(--text);
    line-height: 1.65;
    margin-top: 12px;
  }

  .transform-note strong { color: var(--huf); }

  /* ‚îÄ‚îÄ ARTIFACTS ‚îÄ‚îÄ */
  .artifacts-list {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 12px;
    margin-bottom: 24px;
  }

  .art-item {
    background: var(--s1);
    border: 1px solid var(--border);
    padding: 18px;
    display: flex;
    gap: 14px;
    align-items: flex-start;
  }

  .art-num {
    font-family: 'Instrument Serif', serif;
    font-size: 28px;
    color: var(--border);
    line-height: 1;
    flex-shrink: 0;
    margin-top: -2px;
  }

  .art-file { font-size: 10px; color: var(--huf); margin-bottom: 5px; font-family: monospace; }
  .art-title { font-size: 13px; font-weight: 600; margin-bottom: 5px; }
  .art-desc { font-size: 11px; color: var(--muted); line-height: 1.6; }

  /* ‚îÄ‚îÄ ONE-LINER ‚îÄ‚îÄ */
  .one-liner {
    background: var(--s1);
    border-left: 3px solid var(--huf);
    padding: 20px 24px;
    margin-bottom: 24px;
  }

  .one-liner p {
    font-family: 'Instrument Serif', serif;
    font-size: 20px;
    line-height: 1.5;
    color: var(--text);
  }

  .one-liner span { color: var(--huf); }

  /* ‚îÄ‚îÄ FOOTER ‚îÄ‚îÄ */
  .footer {
    border-top: 1px solid var(--border);
    padding-top: 24px;
    display: flex;
    justify-content: space-between;
    font-size: 11px;
    color: var(--muted);
    flex-wrap: wrap;
    gap: 8px;
  }
  .footer a { color: var(--wv); text-decoration: none; }

  @keyframes rise {
    from { opacity: 0; transform: translateY(16px); }
    to   { opacity: 1; transform: translateY(0); }
  }

  @media (max-width: 700px) {
    .wv-grid { grid-template-columns: 1fr; }
    .rag-flow { grid-template-columns: 1fr; }
    .rf-step::after { display: none; }
    .mt-tenants { grid-template-columns: repeat(2,1fr); }
    .gap-3col { grid-template-columns: 1fr; }
    .huf-flow { grid-template-columns: 1fr; }
    .hf-arrow { transform: rotate(90deg); }
    .export-split { grid-template-columns: 1fr; }
    .artifacts-list { grid-template-columns: 1fr; }
  }
</style>
</head>
<body>
<div class="container">

  <!-- MASTHEAD -->
  <div class="masthead">
    <div class="eyebrow">Technical explainer ¬∑ Feb 2026</div>
    <h1><span class="wv">Weaviate</span> + the gap<br><span class="huf">HUF</span> fills</h1>
    <p class="lede">What a vector database actually does, where it breaks down in production, and why HUF's coherence adapter is the missing audit layer.</p>
  </div>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê PART 1: WEAVIATE ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div class="section" style="animation-delay:0.05s">
    <div class="section-tag">
      <span class="tag-chip chip-wv">Part 1</span>
      <span class="tag-line"></span>
    </div>
    <h2>What Weaviate is and what it does</h2>
    <p class="section-sub">The fundamentals ‚Äî how a vector database stores, organises, and retrieves data</p>

    <div class="wv-grid">
      <div class="wv-card">
        <div class="wv-card-icon">üßÆ</div>
        <h3>Stores vectors + objects together</h3>
        <p>Traditional databases store rows of data. Weaviate stores objects (text, images, documents) alongside their vector embeddings ‚Äî numerical representations of meaning generated by AI models like OpenAI or Cohere.</p>
      </div>
      <div class="wv-card">
        <div class="wv-card-icon">üîç</div>
        <h3>Searches by meaning, not keywords</h3>
        <p>Instead of matching exact words, Weaviate finds objects that are semantically similar ‚Äî "car" retrieves results about "automobile" and "vehicle." It also supports hybrid search combining semantic + keyword (BM25).</p>
      </div>
      <div class="wv-card">
        <div class="wv-card-icon">üèóÔ∏è</div>
        <h3>Organises data into collections & tenants</h3>
        <p>Data is grouped into <strong style="color:var(--wv)">collections</strong> (like tables) and <strong style="color:var(--wv)">tenants</strong> (isolated partitions within a collection ‚Äî one shard per tenant). This is Weaviate's multi-tenancy model.</p>
      </div>
    </div>

    <!-- RAG FLOW -->
    <div class="section-sub" style="margin-bottom:12px">The most common application: Retrieval-Augmented Generation (RAG)</div>
    <div class="rag-flow">
      <div class="rf-step">
        <div class="rf-icon">üìÑ</div>
        <div class="rf-title">Documents ingested</div>
        <div class="rf-desc">KB articles, manuals, tickets, emails chunked and vectorized</div>
      </div>
      <div class="rf-step">
        <div class="rf-icon">üóÇÔ∏è</div>
        <div class="rf-title">Stored in Weaviate</div>
        <div class="rf-desc">Each chunk stored as object + vector in a collection/namespace</div>
      </div>
      <div class="rf-step">
        <div class="rf-icon">‚ùì</div>
        <div class="rf-title">User asks question</div>
        <div class="rf-desc">Query vectorized, top-k most similar chunks retrieved</div>
      </div>
      <div class="rf-step">
        <div class="rf-icon">üì¶</div>
        <div class="rf-title">Context assembled</div>
        <div class="rf-desc">Top results passed to LLM as context window</div>
      </div>
      <div class="rf-step">
        <div class="rf-icon">üí¨</div>
        <div class="rf-title">Answer generated</div>
        <div class="rf-desc">LLM answers grounded in retrieved documents</div>
      </div>
    </div>

    <!-- MULTI-TENANT DIAGRAM -->
    <div class="mt-diagram">
      <div class="mt-title">Real-world Weaviate deployment ‚Äî multi-collection, multi-tenant</div>
      <div class="mt-app">SaaS Application / Enterprise RAG System</div>
      <div class="mt-arrow">‚Üì query: "how do I reset my password?"</div>
      <div class="mt-wv">
        <div class="mt-wv-label">Weaviate ‚Äî one instance, four data sources</div>
        <div class="mt-tenants">
          <div class="mt-tenant kb">kb<div class="mt-tenant-sub">knowledge base</div></div>
          <div class="mt-tenant tickets">tickets<div class="mt-tenant-sub">support ops</div></div>
          <div class="mt-tenant docs">docs<div class="mt-tenant-sub">product docs</div></div>
          <div class="mt-tenant emails">emails<div class="mt-tenant-sub">comms archive</div></div>
        </div>
      </div>
      <div class="query-result">
        <div class="qr-label">What the retrieval actually returns (top-10 results by score)</div>
        <div class="qr-bar-row">
          <div class="qr-name">kb</div>
          <div class="qr-bar-bg"><div class="qr-fill fill-wv" data-w="62">62%</div></div>
          <div class="qr-pct">6 results</div>
        </div>
        <div class="qr-bar-row">
          <div class="qr-name">tickets</div>
          <div class="qr-bar-bg"><div class="qr-fill fill-bl" data-w="20">20%</div></div>
          <div class="qr-pct">2 results</div>
        </div>
        <div class="qr-bar-row">
          <div class="qr-name">docs</div>
          <div class="qr-bar-bg"><div class="qr-fill fill-hu" data-w="15">15%</div></div>
          <div class="qr-pct">1 result</div>
        </div>
        <div class="qr-bar-row">
          <div class="qr-name">emails</div>
          <div class="qr-bar-bg"><div class="qr-fill fill-re" data-w="3">3%</div></div>
          <div class="qr-pct">1 result</div>
        </div>
        <div class="qr-note">‚ö† kb is dominating ‚Äî but is that intentional? Is it just better indexed? Is emails barely contributing because it's irrelevant, or because it's stale? Weaviate's metrics don't tell you this.</div>
      </div>
    </div>
  </div>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê PART 2: THE GAP ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div class="section" style="animation-delay:0.1s">
    <div class="section-tag">
      <span class="tag-chip chip-gap">Part 2</span>
      <span class="tag-line"></span>
    </div>
    <h2>The gap Weaviate doesn't fill</h2>
    <p class="section-sub">What retrieval metrics measure ‚Äî and what they miss entirely</p>

    <div class="gap-box">
      <h3>The silent dominance problem</h3>
      <p>Weaviate tells you how <em>fast</em> it retrieved results, and it returns results ranked by similarity score. What it does not tell you is whether one collection or namespace is quietly supplying most of the mass ‚Äî and whether that dominance is intentional or a sign something is broken.</p>
      <p>Your NDCG, MRR, or recall@k metrics can all look fine while one data source is dominating 80% of every retrieval result. This is what HUF calls the "silent namespace dominance" problem ‚Äî and it's invisible to standard evaluation tooling.</p>
    </div>

    <div class="gap-3col">
      <div class="gap-item">
        <div class="gap-q">"Are my results dominated by one source?"</div>
        <div class="gap-a">Weaviate returns scores per object. <strong>It doesn't aggregate by collection/namespace.</strong> You'd have to write custom code to find this ‚Äî and re-write it every time your schema changes.</div>
      </div>
      <div class="gap-item">
        <div class="gap-q">"What happens to the long tail?"</div>
        <div class="gap-a">Results below a relevance threshold are silently dropped. <strong>There's no discard ledger.</strong> You can't tell how much retrieval mass you threw away, or which sources lost the most.</div>
      </div>
      <div class="gap-item">
        <div class="gap-q">"How concentrated is my result set?"</div>
        <div class="gap-a">You get a ranked list, not a concentration number. <strong>There's no equivalent of items_to_cover_90pct</strong> ‚Äî no single metric that tells you if 3 chunks or 30 chunks explain 90% of your retrieval.</div>
      </div>
    </div>

    <div class="one-liner">
      <p>Your retrieval metrics can be <span>green</span> while the top 3 chunks explain 90% of all result mass ‚Äî and 2 of those chunks were last updated 18 months ago.</p>
    </div>
  </div>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê PART 3: HUF ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div class="section" style="animation-delay:0.15s">
    <div class="section-tag">
      <span class="tag-chip chip-huf">Part 3</span>
      <span class="tag-line"></span>
    </div>
    <h2>Why HUF is needed ‚Äî and what it does</h2>
    <p class="section-sub">HUF is not a replacement for Weaviate ‚Äî it's the audit layer that sits on top of retrieval output</p>

    <div class="huf-flow">
      <div class="hf-box">
        <div class="hf-icon">üóÑÔ∏è</div>
        <div class="hf-title" style="color:var(--wv)">Weaviate</div>
        <div class="hf-desc">Stores vectors. Returns top-k results by similarity score. Does it fast and at scale.</div>
      </div>
      <div class="hf-arrow">‚Üí</div>
      <div class="hf-box highlight">
        <div class="hf-icon">üìä</div>
        <div class="hf-title huf-c">HUF Coherence Adapter</div>
        <div class="hf-desc">Takes retrieval export. Normalizes mass across regimes. Declares discards. Outputs audit artifacts.</div>
      </div>
      <div class="hf-arrow">‚Üí</div>
      <div class="hf-box">
        <div class="hf-icon">üîç</div>
        <div class="hf-title" style="color:var(--blue)">You understand what happened</div>
        <div class="hf-desc">Which namespace dominated. What's in the tail. How concentrated the result set is. Why items were kept or dropped.</div>
      </div>
    </div>

    <div class="wv-grid" style="margin-bottom:24px">
      <div class="wv-card" style="border-top:2px solid var(--huf)">
        <div class="wv-card-icon">‚öñÔ∏è</div>
        <h3 style="color:var(--huf)">Regime ranking</h3>
        <p>Ranks every namespace/collection by post-normalized probability mass (rho_global_post). Answers: which groups dominated, and was that intentional or a sign of data quality issues?</p>
      </div>
      <div class="wv-card" style="border-top:2px solid var(--huf)">
        <div class="wv-card-icon">üìê</div>
        <h3 style="color:var(--huf)">Concentration in one number</h3>
        <p><code style="color:var(--huf)">items_to_cover_90pct</code> ‚Äî if this is 3, then 3 chunks explain 90% of all result mass. If those chunks are stale, 90% of your retrieval quality is at risk. One number, immediately actionable.</p>
      </div>
      <div class="wv-card" style="border-top:2px solid var(--huf)">
        <div class="wv-card-icon">üßæ</div>
        <h3 style="color:var(--huf)">Declared discards</h3>
        <p>Everything dropped below the tau threshold is logged in the error budget. No silent drops. This is the "accounting lens" ‚Äî mass is conserved and accounted for, not silently zeroed.</p>
      </div>
    </div>
  </div>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê PART 4: EXPORTS ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div class="section" style="animation-delay:0.2s">
    <div class="section-tag">
      <span class="tag-chip chip-exp">Part 4</span>
      <span class="tag-line"></span>
    </div>
    <h2>What vector DB exports look like</h2>
    <p class="section-sub">The raw data HUF consumes ‚Äî what Weaviate returns vs. what HUF needs</p>

    <div class="export-split">
      <div class="exp-pane">
        <div class="exp-header">
          <div class="exp-header-title">Weaviate query result (raw Python SDK)</div>
          <div class="exp-header-note">native format</div>
        </div>
        <div class="exp-body">
<pre><span class="c-dim"># Weaviate returns objects with metadata</span>
{
  <span class="c-key">"data"</span>: {
    <span class="c-key">"Get"</span>: {
      <span class="c-key">"KnowledgeBase"</span>: [
        {
          <span class="c-key">"_additional"</span>: {
            <span class="c-key">"id"</span>: <span class="c-str">"doc_001"</span>,
            <span class="c-key">"certainty"</span>: <span class="c-num">0.82</span>,
            <span class="c-key">"distance"</span>: <span class="c-num">0.18</span>
          },
          <span class="c-key">"title"</span>: <span class="c-str">"Password reset guide"</span>,
          <span class="c-key">"source"</span>: <span class="c-str">"handbook"</span>,
          <span class="c-key">"tenant"</span>: <span class="c-str">"kb"</span>
        },
        <span class="c-dim">// ... more objects</span>
      ]
    }
  }
}</pre>
        </div>
      </div>
      <div class="exp-pane">
        <div class="exp-header">
          <div class="exp-header-title">HUF input format (JSONL)</div>
          <div class="exp-header-note">one object per line</div>
        </div>
        <div class="exp-body">
<pre><span class="c-dim"># Flatten to JSONL ‚Äî one line per result</span>
<span class="c-dim"># Required: id + score (higher = better)</span>
<span class="c-dim"># Optional: any grouping fields</span>

{<span class="c-key">"id"</span>:<span class="c-str">"doc_001"</span>,<span class="c-key">"score"</span>:<span class="c-num">0.82</span>,
 <span class="c-key">"namespace"</span>:<span class="c-str">"kb"</span>,<span class="c-key">"source"</span>:<span class="c-str">"handbook"</span>}

{<span class="c-key">"id"</span>:<span class="c-str">"doc_002"</span>,<span class="c-key">"score"</span>:<span class="c-num">0.63</span>,
 <span class="c-key">"namespace"</span>:<span class="c-str">"kb"</span>,<span class="c-key">"source"</span>:<span class="c-str">"manual"</span>}

{<span class="c-key">"id"</span>:<span class="c-str">"doc_101"</span>,<span class="c-key">"score"</span>:<span class="c-num">0.77</span>,
 <span class="c-key">"namespace"</span>:<span class="c-str">"tickets"</span>,<span class="c-key">"source"</span>:<span class="c-str">"ops"</span>}

{<span class="c-key">"id"</span>:<span class="c-str">"doc_102"</span>,<span class="c-key">"score"</span>:<span class="c-num">0.12</span>,
 <span class="c-key">"namespace"</span>:<span class="c-str">"tickets"</span>,<span class="c-key">"source"</span>:<span class="c-str">"ops"</span>}</pre>
        </div>
      </div>
    </div>

    <div class="transform-note">
      <strong>The only transform needed:</strong> Weaviate returns <code>certainty</code> (0‚Äì1, higher = better) or <code>distance</code> (lower = better). For HUF, use <code>certainty</code> directly as <code>score</code>, or convert distance with <code>score = 1 / (1 + distance)</code>. That's it. No schema changes. No live DB connection. Export once, audit offline.
    </div>

    <!-- OUTPUT ARTIFACTS -->
    <div class="section-sub" style="margin-top:28px;margin-bottom:16px">HUF outputs 4 contract artifacts from every run</div>
    <div class="artifacts-list">
      <div class="art-item">
        <div class="art-num">1</div>
        <div>
          <div class="art-file">artifact_1_coherence_map.csv</div>
          <div class="art-title">Regime Ranking</div>
          <div class="art-desc">Every namespace/collection ranked by post-normalized mass (rho_global_post). Sort descending to see who dominated. Check if top regime > 50% ‚Äî that's concentration. Check discard column ‚Äî which regime lost the most.</div>
        </div>
      </div>
      <div class="art-item">
        <div class="art-num">2</div>
        <div>
          <div class="art-file">artifact_2_active_set.csv</div>
          <div class="art-title">Retained Items</div>
          <div class="art-desc">Every item that passed the tau threshold with global and local mass scores. Sort by rho_global_post for a global review queue. Filter by namespace and sort by rho_local_post for within-regime triage.</div>
        </div>
      </div>
      <div class="art-item">
        <div class="art-num">3</div>
        <div>
          <div class="art-file">artifact_3_trace_report.jsonl</div>
          <div class="art-title">Provenance Trace</div>
          <div class="art-desc">Full audit trail ‚Äî why each item was retained or discarded, what input fields formed each row, what exclusions occurred. The "workpapers" for the run ‚Äî use when someone asks "why is this item here?"</div>
        </div>
      </div>
      <div class="art-item">
        <div class="art-num">4</div>
        <div>
          <div class="art-file">artifact_4_error_budget.json</div>
          <div class="art-title">Discard Ledger</div>
          <div class="art-desc">Explicit accounting of everything dropped below tau threshold. Total discarded mass, per-regime breakdown. Ensures nothing is silently thrown away ‚Äî the "unity budget" guarantees mass is conserved and accounted for.</div>
        </div>
      </div>
    </div>
  </div>

  <!-- FOOTER -->
  <div class="footer">
    <span>HUF Core v1.1.8 ¬∑ Technical Explainer ¬∑ Feb 2026</span>
    <a href="https://peterhiggins19.github.io/huf_core_github_v1.1.8_no_inputs/vector_db_coherence_one_pager/">HUF one-pager ‚Üó</a>
  </div>

</div>

<script>
setTimeout(() => {
  document.querySelectorAll('.qr-fill').forEach(el => {
    el.style.width = el.dataset.w + '%';
  });
}, 300);
</script>
</body>
</html>
